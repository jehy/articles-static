<!DOCTYPE HTML>
<html lang="en">
<head>
  <meta charset="utf-8">
  
  <title>Чистка wiki от старых ревизий/Clean old wiki revisions | Jehy&#39;s notes</title>
  <meta name="author" content="Jehy">
  
  <meta name="description" content="База данных проекта, основанного на движке wiki, мгновенно разрастается до абсолютно несуразных размеров. По непонятным причинам (видимо, какие-то соображения внутренней политики) у самой wikimedia нет штатных механизмов для удаления старых версий (ревизий) статей.
Но есть замечательный плагин под названием “SpecialDeleteOldRevisions”, который эту функциональность обеспечивает. С его помощью можно удалить статьи, фильтруя по
Категории статьи
Дате создания ревизии
Названию статьи
При этом можно удалять архивные (удалённые) статьи, а можно нет. Проверил на [своей вики](https://jehy.ru/wiki) - всё работает прекрасно. Но, как всегда, после некоторой работы напильником. Я её осуществил и выложил пропатченный плагин у себя.
[Оригинальная страница плагина](http://www.mediawiki.org/wiki/Extension:SpecialDeleteOldRevisions)
[Моя пропатченная версия для вики 13.2](https://jehy.ru/dload/specialdeleteoldrevisions.zip)
Для того, чтобы установить плагин, скопируйте его директорию &#34;SpecialDeleteOldRevisions&#34; в &#34;/extensions&#34;, после чего добавьте в файл LocalSettings.php строчки

 $wgGroupPermissions[&#39;sysop&#39;][&#39;DeleteOldRevisions&#39;] = true;
 include_once(&#39;extensions/SpecialDeleteOldRevisions/SpecialDeleteOldRevisions.php&#39;);

После этого в списке служебных страниц появится страница &#34;Delete old revisions&#34; - вперёд и без испуга. Хотя лучше сначала всё-таки сделать бэкап базы ;).">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="Чистка wiki от старых ревизий/Clean old wiki revisions"/>
  <meta property="og:site_name" content="Jehy&#39;s notes"/>

  
    <meta property="og:image" content=""/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Jehy&#39;s notes" type="application/atom+xml">
  
<link rel="stylesheet" href="/css/style.css">

  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  

<meta name="generator" content="Hexo 5.0.0"></head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">Jehy&#39;s notes</a></h1>
  <h2><a href="/">Insert 1 into dual</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
      <li><a href="/wishlist">Wishlist</a></li>
    
      <li><a href="/donate">Donate</a></li>
    
      <li><a href="/atom.xml">Subscribe</a></li>
    
      <li><a target="_blank" rel="noopener" href="https://whois.jehy.ru">Contact me</a></li>
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div>
</header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article id="post-2008/10/delete-clean-wiki-old-revisions" class="h-entry post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time class="dt-published" datetime="2008-10-06T02:39:02.000Z"><a href="/2008/10/06/delete-clean-wiki-old-revisions/">2008-10-06</a></time>
      
      
  
    <h1 class="p-name title" itemprop="headline name">Чистка wiki от старых ревизий/Clean old wiki revisions</h1>
  

    </header>
    <div class="e-content entry" itemprop="articleBody">
      
        <p>База данных проекта, основанного на движке wiki, мгновенно разрастается до абсолютно несуразных размеров. По непонятным причинам (видимо, какие-то соображения внутренней политики) у самой wikimedia нет штатных механизмов для удаления старых версий (ревизий) статей.</p>
<p>Но есть замечательный плагин под названием “SpecialDeleteOldRevisions”, который эту функциональность обеспечивает. С его помощью можно удалить статьи, фильтруя по<UL></p>
<li>Категории статьи</li>
<li>Дате создания ревизии</li>
<li>Названию статьи</li>
</UL>При этом можно удалять архивные (удалённые) статьи, а можно нет. Проверил на [своей вики](https://jehy.ru/wiki) - всё работает прекрасно. Но, как всегда, после некоторой работы напильником. Я её осуществил и выложил пропатченный плагин у себя.
[Оригинальная страница плагина](http://www.mediawiki.org/wiki/Extension:SpecialDeleteOldRevisions)
[Моя пропатченная версия для вики 13.2](https://jehy.ru/dload/specialdeleteoldrevisions.zip)
Для того, чтобы установить плагин, скопируйте его директорию "SpecialDeleteOldRevisions" в "/extensions", после чего добавьте в файл LocalSettings.php строчки
<pre lang="php">
 $wgGroupPermissions['sysop']['DeleteOldRevisions'] = true;
 include_once('extensions/SpecialDeleteOldRevisions/SpecialDeleteOldRevisions.php');
</pre>
После этого в списке служебных страниц появится страница "Delete old revisions" - вперёд и без испуга. Хотя лучше сначала всё-таки сделать бэкап базы ;).
<a id="more"></a>
<hr />
Data base of wikimedia-based project in several monthes can gain awful size. Since there are no solutions from wikimedia itself, but you can use wonderful plugin "SpecialDeleteOldRevisions", который эту функциональность обеспечивает. It helps you to delete articles, filtering by<UL>
<li>Article Category</li>
<li>Revision creation time</li>
<li>Article name</li>
</UL>Also you have an option - if you want to delete deleted articles from database or not. I checked it on [my wiki](https://jehy.ru/wiki) - everything works wonderful. But, as always, after some bugfix. I made this work and published fixed version.
[Original plugin page](http://www.mediawiki.org/wiki/Extension:SpecialDeleteOldRevisions)
[My patched version for wiki 13.2](https://jehy.ru/dload/specialdeleteoldrevisions.zip)
To install plugin, copy it's directory "SpecialDeleteOldRevisions" to your "/extensions", and add to LocalSettings.php the following lines:
<pre lang="php">
 $wgGroupPermissions['sysop']['DeleteOldRevisions'] = true;
 include_once('extensions/SpecialDeleteOldRevisions/SpecialDeleteOldRevisions.php');
</pre>
After it in "special pages" you will see new link - "Delete old revisions" - use it. And better make backup firstly ;).

      
    </div>
    <footer>
      
        
        
  
  <div class="tags">
    <a href="/tags/dev/">dev</a>, <a href="/tags/wiki/">wiki</a>
  </div>

        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>

<!-- 
<section id="comment">
  <h1 class="title">Comments</h1>

  
</section>
 -->

</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="as_sitesearch" value="articles.jehy.ru">
  </form>
</div>


  

  
<div class="widget tagcloud">
  <h3 class="title">Tag Cloud</h3>
  <div class="entry">
    <a href="/tags/MS-SQL/" style="font-size: 10px;">MS SQL</a> <a href="/tags/Oracle/" style="font-size: 11.43px;">Oracle</a> <a href="/tags/PHP/" style="font-size: 10.71px;">PHP</a> <a href="/tags/RHEL/" style="font-size: 10px;">RHEL</a> <a href="/tags/SAP/" style="font-size: 10px;">SAP</a> <a href="/tags/android/" style="font-size: 10.71px;">android</a> <a href="/tags/applet/" style="font-size: 12.14px;">applet</a> <a href="/tags/buddypress/" style="font-size: 10px;">buddypress</a> <a href="/tags/codesigning/" style="font-size: 10.71px;">codesigning</a> <a href="/tags/dev/" style="font-size: 15.71px;">dev</a> <a href="/tags/fun/" style="font-size: 14.29px;">fun</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/habr/" style="font-size: 19.29px;">habr</a> <a href="/tags/java/" style="font-size: 12.14px;">java</a> <a href="/tags/jvm/" style="font-size: 10px;">jvm</a> <a href="/tags/livejournal/" style="font-size: 10px;">livejournal</a> <a href="/tags/medium/" style="font-size: 10.71px;">medium</a> <a href="/tags/mta/" style="font-size: 10px;">mta</a> <a href="/tags/openid/" style="font-size: 10.71px;">openid</a> <a href="/tags/skype/" style="font-size: 10px;">skype</a> <a href="/tags/webstart/" style="font-size: 12.14px;">webstart</a> <a href="/tags/wiki/" style="font-size: 12.14px;">wiki</a> <a href="/tags/wod/" style="font-size: 10px;">wod</a> <a href="/tags/wordpress/" style="font-size: 16.43px;">wordpress</a> <a href="/tags/wordpress-mu/" style="font-size: 10px;">wordpress mu</a> <a href="/tags/yum/" style="font-size: 10px;">yum</a> <a href="/tags/%D0%B0%D0%BD%D0%B8%D0%BC%D0%B5/" style="font-size: 12.14px;">аниме</a> <a href="/tags/%D0%B1%D0%B5%D0%B3/" style="font-size: 10px;">бег</a> <a href="/tags/%D0%B8%D0%BD%D0%BA%D0%B2%D0%B8%D0%B7%D0%B8%D1%86%D0%B8%D1%8F/" style="font-size: 10.71px;">инквизиция</a> <a href="/tags/%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D0%BD%D0%B5%D1%82%D1%8B/" style="font-size: 11.43px;">интернеты</a> <a href="/tags/%D0%B8%D1%81%D1%82%D0%BE%D1%80%D0%B8%D0%B8/" style="font-size: 20px;">истории</a> <a href="/tags/%D0%BA%D0%B0%D1%80%D1%82%D0%B8%D0%BD%D0%BA%D0%B8/" style="font-size: 13.57px;">картинки</a> <a href="/tags/%D0%BA%D0%B8%D0%BD%D0%BE/" style="font-size: 15px;">кино</a> <a href="/tags/%D0%BA%D0%BD%D0%B8%D0%B6%D0%BD%D0%BE%D0%B5/" style="font-size: 17.14px;">книжное</a> <a href="/tags/%D0%BA%D0%BF%D0%BA/" style="font-size: 10.71px;">кпк</a> <a href="/tags/%D0%BB%D0%B8%D0%BD%D1%83%D0%BA%D1%81/" style="font-size: 10px;">линукс</a> <a href="/tags/%D0%BB%D1%8E%D0%B4%D0%B8/" style="font-size: 10px;">люди</a> <a href="/tags/%D0%BC%D0%B0%D0%BD%D0%B3%D0%B0/" style="font-size: 10.71px;">манга</a> <a href="/tags/%D0%BC%D1%83%D0%B7%D1%8B%D0%BA%D0%B0/" style="font-size: 17.86px;">музыка</a> <a href="/tags/%D0%BC%D1%8B%D1%81%D0%BB%D0%B8/" style="font-size: 17.14px;">мысли</a> <a href="/tags/%D0%BF%D0%B5%D1%80%D0%B5%D0%B2%D0%BE%D0%B4%D1%8B/" style="font-size: 14.29px;">переводы</a> <a href="/tags/%D0%BF%D0%BE-%D0%B6%D0%B8%D0%B7%D0%BD%D0%B8/" style="font-size: 10.71px;">по жизни</a> <a href="/tags/%D0%BF%D0%BE%D0%BB%D0%B8%D1%82%D0%B8%D0%BA%D0%B0/" style="font-size: 10.71px;">политика</a> <a href="/tags/%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0/" style="font-size: 10.71px;">работа</a> <a href="/tags/%D1%82%D0%B0%D1%80%D0%BE/" style="font-size: 12.14px;">таро</a> <a href="/tags/%D1%83%D1%87%D0%B5%D0%B1%D0%BD%D0%BE%D0%B5/" style="font-size: 12.86px;">учебное</a> <a href="/tags/%D1%85%D0%B8%D0%BA%D0%BA%D0%B8/" style="font-size: 10px;">хикки</a> <a href="/tags/%D1%86%D0%B5%D1%80%D0%BA%D0%BE%D0%B2%D1%8C/" style="font-size: 10.71px;">церковь</a> <a href="/tags/%D1%86%D0%B8%D1%82%D0%B0%D1%82%D1%8B/" style="font-size: 18.57px;">цитаты</a>
  </div>
</div>


  
<div class="widget tag">
  <h3 class="title">Recent Posts</h3>
  <ul class="entry">
    
      <li>
        <a href="/2020/06/26/как-активный-гражданин-приучает-людей-к-фишингу/">Как «активный гражданин» приучает людей к фишингу</a>
      </li>
    
      <li>
        <a href="/2020/02/16/снимаем-покрытие-кода-с-уже-запущенного-nodejs-приложения/">Снимаем покрытие кода с уже запущенного Node.JS приложения</a>
      </li>
    
      <li>
        <a href="/2020/01/31/как-мигрировать-с-mocha-на-jest-в-15-простых-шагов-—-и-зачем/">Как мигрировать с mocha на jest в 15 простых шагов — и зачем</a>
      </li>
    
      <li>
        <a href="/2019/12/17/зачем-нужно-столько-разработчиков/">Зачем нужно столько разработчиков?</a>
      </li>
    
      <li>
        <a href="/2019/11/22/deno-время-nodejs-уходит/">Deno - время Node.JS уходит?</a>
      </li>
    
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><!--<div class="alignleft">
  
  &copy; 2020 Jehy
  
</div>-->
<div class="clearfix"></div>
</footer>
  
<script src="/js/jquery-3.4.1.min.js"></script>


<script src="/js/jquery.imagesloaded.min.js"></script>


<script src="/js/gallery.js"></script>






<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script src="/fancybox/jquery.fancybox.pack.js"></script>

<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>
